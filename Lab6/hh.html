<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const ws = new WebSocket("ws://" + window.location.host + "/ws");
            const container = document.getElementById("news-container");

            ws.onmessage = function(event) {
                const newsItem = JSON.parse(event.data);
                const div = document.createElement("div");
                div.className = "news-item";
                div.innerHTML = `
                    <h2><a href="${newsItem.link}" target="_blank">${newsItem.title}</a></h2>
                    <p>${newsItem.description}</p>
                    <small>${new Date(newsItem.pub_date).toLocaleString()}</small>
                    <hr>
                `;
                container.prepend(div);
            };

            ws.onclose = function() {
                console.log("WebSocket соединение закрыто");
            };
        });
    </script>
</head>
<body>
    <h1>Новости</h1>
    <div id="news-container"></div>
</body>
</html>
