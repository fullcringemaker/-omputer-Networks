	Лаба 4

разработаем элементарный прокси-сервер с возможностью парсинга контента (анализатор трафика по протоколу http)

есть локальная сеть. есть клиенты (конечные узлы или пользователи, использующие браузер для доступа в интернет). ставится и прописывать http-proxy (работает не на 80 порту, не на 443, они должны быть на gateway закрыты, чтобы нельзя было обращаться к внешним ресурсам). 
На gateway прописывается, что все, что приходит на gateway в айпи-адресе получателя, и там будет 443 или 80 порт, то происходит delay-drop пакетов.

Пусть у Lan будет IP 192.168.1.0, у http proxy будет 192.168.1.254. и этому прокси-серверу доступ в интернет разрешен (только ему), и если мы траффик пользователей по 80 или 443 порту пропустим не через gateway, а через proxy. Допустим для примера он слушает на 8000-ом порту, тогда весь трафик идет в http-proxy. Если допустим пишем www.yandex.ru, запрос идет на proxy-сервер, а уже proxy-сервер в зависимости от реализации кода перенаправляет на gateway, а там для него все порыт открыты. Затем данные отправляются к внешним узлам, данные возвращаются и маршрутизируются опять на proxy (он запоминает, от кого именно пришел запрос). Http-proxy кэширует запросы


схема работы для выполнения задания. Итак, internet, gateway. пользователь нахожусь в какой то локальной сети. есть 4 wds-сервера. вот на эти сервера ставлю эти proxy. тренируем на новостных сайтах (где можно пройтись по ссылкам и достать ссылки.
Механизм такой: я беру в браузере сайт bmstu.ru, но пишу не эту ссылку, а пишу https://185.104.251.226:9742/bmstu.ru (где 185.104.251.226 это айпи одного из wds серверов, а 9742 - порт, который я использую), куда нельзя обратиться напрямую и можно только через прокси. можно сказать, что в прокси в качестве гет-параметра передается домен, который мы проксируем. прокси получает домен, идет на bmstu.ru и должен вернуть контент пользователю. в итоге пользователю должно вернуть страничку как на bmstu.ru, но с адресом https://net1.yss.su:9651/bmstu.ru. При этом все гиперссылки должны быть изменены на проксирующие гиперссылки. Нужно парсер реализовать (как минимум чтобы найти ссылки)
Если делать все правильно, заблокировать на компе bmstu.ru, то когда прокси вернет страничку, то при неправильнйо передаче css и js, то страница развалится. Нужно проксировать именно html-ные сайты, потому что для данного задания не все будут проксироваться. Мы проксируем html по минимум, поэтому берутся простые сайты, но должно работать хотя бы с логотипами. Но нужно проксировать существующие сайты (нельзя развернуть свой сайт и на нем делать)

научиться заблочить хост для этого

Короче важно, чтобы сайт парсился, был целым, открывался, не разваливался и были переходы по гиперссылкам. При этом надо заблокировать исходный сайт в браузере для того, чтобы проверить работу прокси-сервера. поскольку иначе при переходе по ссылке будет запрашиваться стиль исходного сайта. 
Учти что то, что написано про bmstu.ru явялется общим описанием, и bmstu.ru взято исключительно для примера

например на сайте https://putty.org/ можно перейти по ссылке и попасть на https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html

В моём же случае необходимо, чтоб с сайта http://185.104.251.226:9742/putty.org переходило например на https://185.104.251.226:9742/www.chiark.greenend.org.uk/~sgtatham/putty/latest.html

очень важно, что нужно, скачивать css и png локально, а также обработка js, а затем это все подгружать
